/* =========================================================
   mmdrza.AI â€” Neon Glass UI v5.3X (optimized, accessible)
   - Unified tokens (colors, radii, shadows, z-index, spacing)
   - No duplicate blocks, clean layering, smooth interactions
   - A11y: focus states, prefers-reduced-motion, scrollbar
   ========================================================= */

/* -------------------- TOKENS -------------------- */
:root {
  /* Colors */
  --c-bg-0: #000;
  --c-text: #fff;
  --c-text-dim: rgba(255,255,255,.75);
  --c-primary: #00e0ff;
  --c-primary-2: #00bfff;
  --c-primary-3: #007bff;
  --c-accent: #ffd700;

  /* Backgrounds */
  --bg-main: radial-gradient(circle at top left, #01051c, #001b36, #000);
  --chat-bg: radial-gradient(circle at top, #001030, #000618);
  --navbar-bg: linear-gradient(90deg, #003b7f80, #00bfff60);
  --sidebar-bg: rgba(255,255,255,0.05);
  --msg-ai-bg: rgba(255,255,255,0.07);
  --msg-user-bg: linear-gradient(135deg, #007bff, #00bfff);

  /* Borders & shadows */
  --border-color: rgba(255,255,255,0.1);
  --shadow-color: var(--c-primary-2);
  --shadow-soft: 0 8px 22px rgba(0,0,0,.35);
  --shadow-neon: 0 0 20px var(--c-primary-2);

  /* Radii & spacing */
  --r-lg: 20px;
  --r-md: 14px;
  --r-sm: 10px;
  --pad: 1rem;
  --gap: .8rem;

  /* Effects */
  --blur: 10px;
  --blur-strong: 20px;

  /* Z-index (Bootstrap-aware) */
  --z-navbar: 1030;
  --z-modelbar: 1032;
  --z-offcanvas: 1050;
  --z-dropdown: 1080;
  --z-modal: 1100;
  --z-overlay: 9999;

  /* Transitions */
  --tr-fast: .2s ease;
  --tr-med: .3s ease;
  --tr-slow: .6s ease;
}

/* ğŸŒ Light Theme */
.light-mode {
  --c-bg-0: #fff;
  --c-text: #111;
  --c-text-dim: rgba(0,0,0,.75);
  --c-primary: #00aaff;
  --c-primary-2: #4facfe;
  --c-primary-3: #00f2fe;
  --c-accent: #ff9d00;

  --bg-main: linear-gradient(to bottom right, #e9f5ff, #ffffff);
  --chat-bg: #f5f9ff;
  --navbar-bg: linear-gradient(90deg,#d6f0ff,#f8ffff);
  --sidebar-bg: rgba(255,255,255,0.9);
  --msg-ai-bg: #e9f2ff;
  --msg-user-bg: linear-gradient(135deg,#4facfe,#00f2fe);

  --border-color: rgba(0,0,0,0.1);
  --shadow-color: #4facfe;
}

/* -------------------- BASE -------------------- */
* { box-sizing: border-box; }
html { color-scheme: dark light; }
body {
  font-family: "Poppins", system-ui, -apple-system, Segoe UI, Roboto, sans-serif;
  background: var(--bg-main);
  margin: 0;
  color: var(--c-text);
  display: flex; flex-direction: column;
  min-height: 100vh;
  transition: background var(--tr-slow), color var(--tr-slow);
}

/* Smooth scrolling & nice selection */
:root { scroll-behavior: smooth; }
::selection { background: rgba(0,224,255,.35); color: #fff; }

/* Scrollbar (WebKit) */
*::-webkit-scrollbar { width: 10px; height: 10px; }
*::-webkit-scrollbar-track { background: transparent; }
*::-webkit-scrollbar-thumb {
  background: linear-gradient(180deg, #00bfff88, #0066ff88);
  border-radius: 999px; border: 2px solid transparent; background-clip: padding-box;
}

/* Focus visibility for keyboard users */
:focus-visible {
  outline: 2px solid var(--c-primary);
  outline-offset: 2px;
  border-radius: 10px;
}

/* Respect reduced motion */
@media (prefers-reduced-motion: reduce) {
  * { animation: none !important; transition: none !important; }
}

/* -------------------- NAVBAR & TOP BAR -------------------- */
.navbar {
  background: var(--navbar-bg);
  backdrop-filter: blur(var(--blur));
  -webkit-backdrop-filter: blur(var(--blur));
  border-bottom: 1px solid var(--border-color);
  transition: background var(--tr-slow);
  position: relative; z-index: var(--z-navbar);
}
@supports not ((backdrop-filter: blur(1px))) {
  .navbar { background: rgba(0,0,0,.35); }
}
.navbar-brand {
  font-weight: 700;
  color: var(--c-text) !important;
  text-shadow: 0 0 12px var(--shadow-color);
}

#modelBar { position: relative; z-index: var(--z-modelbar); }
#modelBar .dropdown-menu {
  z-index: var(--z-dropdown);
  backdrop-filter: none;
  background: rgba(12,16,28,0.98);
  border: 1px solid rgba(138,160,197,0.35);
  box-shadow: 0 8px 24px rgba(0,0,0,0.45);
}

/* -------------------- LAYOUT -------------------- */
.chat-container { flex: 1; display: flex; min-height: 0; } /* min-height:0 Ø¨Ø±Ø§ÛŒ overflow Ø¯Ø±Ø³Øª */

.sidebar {
  width: 250px;
  background: var(--sidebar-bg);
  backdrop-filter: blur(var(--blur));
  -webkit-backdrop-filter: blur(var(--blur));
  border-right: 1px solid var(--border-color);
  padding: var(--pad);
  display: flex; flex-direction: column;
  transition: background var(--tr-slow);
}
.sidebar h5 { font-size: 1.1rem; color: var(--c-primary-2); margin-bottom: 1rem; }
.sidebar .btn {
  border-radius: var(--r-sm);
  text-align: left;
  background: rgba(0,0,30,0.2);
  color: var(--c-text);
  margin-bottom: .5rem;
  transition: var(--tr-med);
  border: 1px solid transparent;
}
.sidebar .btn:hover {
  background: linear-gradient(90deg,#0040ff,#00c2ff);
  box-shadow: var(--shadow-neon);
  border-color: rgba(255,255,255,.15);
}

.chat-main {
  flex: 1; display: flex; flex-direction: column;
  background: var(--chat-bg);
  transition: background var(--tr-slow);
  min-width: 0;
}

/* -------------------- MESSAGES -------------------- */
.chat-messages {
  flex: 1; overflow-y: auto; padding: 1rem;
}
.message { display: flex; gap: var(--gap); margin-bottom: 1rem; align-items: flex-end; }
.avatar {
  width: 36px; height: 36px; border-radius: 50%;
  flex: 0 0 auto; margin-top: 2px;
  box-shadow: 0 0 0 2px rgba(255,255,255,.08), 0 6px 14px rgba(0,0,0,.4);
  background: linear-gradient(135deg,#0048ff,#00ffff);
}
.msg-user .avatar {
  background: radial-gradient(circle at 70% 30%, #ffd37a 0%, #ff8a7a 65%, transparent 66%);
}
.label { font-size: .72rem; color: var(--c-text-dim); margin: 10px 0 4px 54px; user-select: none; }

.msg-content {
  padding: .9rem 1.2rem;
  border-radius: 15px;
  line-height: 1.55;
  max-width: min(80%, 820px);
  border: 1px solid var(--border-color);
  backdrop-filter: blur(6px);
  -webkit-backdrop-filter: blur(6px);
  box-shadow: var(--shadow-soft), 0 0 0 1px rgba(122,92,255,.08) inset;
  word-wrap: break-word;
}
.msg-user { justify-content: flex-end; }
.msg-user .msg-content {
  background: var(--msg-user-bg);
  color: #fff;
  box-shadow: 0 6px 20px rgba(0,191,255,.25);
  border: 1px solid rgba(255,255,255,0.12);
}
.msg-ai .msg-content {
  background: var(--msg-ai-bg);
  border-left: 3px solid var(--c-primary-2);
}

/* Code blocks inside AI */
.msg-ai pre{
  background: rgba(255,255,255,0.06);
  border: 1px solid rgba(255,255,255,0.08);
  border-radius: 12px;
  padding: 10px 12px; overflow: auto;
}
.msg-ai code{ font-family: ui-monospace, SFMono-Regular, Menlo, Consolas, monospace; }
.md-copy{
  position: absolute; top: 8px; right: 8px;
  background: rgba(0,0,0,.6);
  border: 1px solid rgba(255,255,255,.2);
  color:#fff; cursor:pointer; font-size: 12px;
  padding: 4px 8px; border-radius: 8px;
}

/* Actions under last AI message */
.msg-actions{
  display:flex; gap:8px; margin:6px 0 14px 54px; opacity:.9;
}
.msg-actions .btn-sm{
  border-radius:20px; padding:3px 10px; font-size:.75rem;
  background:rgba(255,255,255,.06); color:#fff; border:1px solid rgba(255,255,255,.1);
}
.msg-actions .btn-sm:hover{ background:rgba(0,255,255,.15); border-color:rgba(0,255,255,.35); }

/* Typing dots */
.typing{ display:flex; align-items:center; gap:6px; margin:8px 0 0 54px; }
.typing-dot{
  width:6px; height:6px; border-radius:50%; background:var(--c-primary); opacity:.85;
  animation: td 1s infinite ease-in-out;
}
.typing-dot:nth-child(2){ animation-delay:.15s; }
.typing-dot:nth-child(3){ animation-delay:.3s; }
@keyframes td{ 0%{transform:translateY(0)} 50%{transform:translateY(-4px)} 100%{transform:translateY(0)} }

/* Quick prompts (chips) */
.quick-prompts{
  display:flex; flex-wrap:wrap; gap:8px;
  padding: 8px 16px 10px;
  border-top: 1px dashed var(--border-color);
  background: rgba(255,255,255,0.03);
}
.chip{
  padding:6px 10px; border-radius:999px; font-size:.85rem;
  color:#cfe9ff; cursor:pointer;
  border:1px solid var(--border-color);
  background: rgba(255,255,255,0.04);
  transition: transform .15s ease, background .15s ease, border-color .15s ease;
  user-select: none;
}
.chip:hover{
  transform: translateY(-1px);
  background: rgba(0,255,255,0.10);
  border-color: rgba(0,255,255,0.45);
}

/* -------------------- INPUT BAR -------------------- */
.chat-input {
  display: flex; align-items: center;
  gap: .6rem; padding: .8rem;
  border-top: 1px solid var(--border-color);
  background: rgba(0,0,30,0.3);
}
.chat-input input {
  flex: 1; border: none;
  background: rgba(255,255,255,0.08);
  color: var(--c-text);
  padding: .8rem 1rem; border-radius: 50px;
}
.chat-input input:focus { outline: none; box-shadow: 0 0 10px var(--c-primary-2); }
.chat-input button {
  border: none; color: #fff;
  border-radius: 50%; width: 48px; height: 48px;
  background: linear-gradient(90deg,#0066ff,#00bfff);
  transition: transform var(--tr-med), box-shadow var(--tr-med);
}
.chat-input button:hover { transform: scale(1.1); box-shadow: var(--shadow-neon); }

/* Attach button */
.attach-btn {
  background: rgba(0, 255, 255, 0.15);
  border: 1px solid rgba(0, 255, 255, 0.4);
  color: var(--c-primary);
  font-size: 1.2rem; width: 46px; height: 46px;
  transition: var(--tr-med);
}
.attach-btn:hover {
  background: linear-gradient(135deg, var(--c-primary-2), var(--c-primary-3));
  color: #fff; transform: scale(1.08);
  box-shadow: 0 0 15px var(--c-primary-2);
}

/* -------------------- SCROLL PILL -------------------- */
.scroll-indicator {
  position: fixed; right: 20px; bottom: 90px;
  width: 45px; height: 45px; border-radius: 50%;
  border: 1px solid var(--border-color);
  background: rgba(10,15,28,.7);
  display: flex; align-items: center; justify-content: center;
  opacity: 0; cursor: pointer; transition: var(--tr-med);
  box-shadow: 0 0 18px rgba(0, 191, 255, .25);
  z-index: var(--z-overlay);
}
.scroll-indicator.show { opacity: 1; }

/* -------------------- MODALS / OFFCANVAS -------------------- */
.modal-content {
  background: rgba(0,10,30,0.95);
  color: #fff;
  border: 1px solid rgba(0,195,255,0.2);
  box-shadow: 0 0 30px #00cfff;
}

.offcanvas.text-bg-dark{
  background: rgba(0, 10, 25, 0.96) !important;
  border-right: 1px solid rgba(0,255,255,0.18);
  backdrop-filter: blur(var(--blur));
  -webkit-backdrop-filter: blur(var(--blur));
  z-index: var(--z-offcanvas);
}

/* ULTRA modal & overlay */
.ultra-modal {
  position: fixed; inset: 0;
  background: rgba(5,8,16,.55);
  backdrop-filter: blur(6px);
  -webkit-backdrop-filter: blur(6px);
  display: none; justify-content: center; align-items: center;
  z-index: var(--z-modal);
}
.ultra-modal.show { display: flex; }
.ultra-content {
  position: relative;
  background: linear-gradient(180deg, rgba(255,255,255,.08), rgba(255,255,255,.04));
  border: 1px solid rgba(0, 200, 255, 0.3);
  border-radius: var(--r-lg);
  box-shadow: 0 18px 60px rgba(0,0,0,.6), 0 0 0 1px rgba(122,92,255,.12) inset;
  padding: 2.2rem; width: 90%; max-width: 520px; text-align: center; color: #fff;
}

/* Ultra lock overlay */
.ultra-lock-overlay {
  position: fixed; inset: 0;
  background: rgba(0, 0, 0, 0.88);
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
  display: flex; justify-content: center; align-items: center;
  z-index: var(--z-modal);
}
.ultra-lock-box {
  background: rgba(255, 255, 255, 0.08);
  border: 1px solid rgba(0, 200, 255, 0.3);
  box-shadow: 0 0 35px rgba(0, 200, 255, 0.4);
  border-radius: 18px; padding: 2rem; text-align: center; color: #fff;
  width: 90%; max-width: 420px;
}

/* Pricing */
.ultra-pricing { display:flex; justify-content:center; gap:1rem; margin:1.5rem 0; }
.price-card {
  flex: 1; cursor: pointer; transition: var(--tr-med);
  border: 1px solid rgba(255,255,255,0.1);
  border-radius: var(--r-md);
  padding: 1rem; background: rgba(255,255,255,0.05);
}
.price-card.best { background: linear-gradient(135deg, #0048ff55, #00f2ff44); border-color: #00e0ff; box-shadow: 0 0 20px #00cfff77; }
.price-card:hover { transform: scale(1.05); box-shadow: 0 0 25px #00ffff88; }
.price-card.selected { border: 2px solid var(--c-primary); background: rgba(0,255,255,0.1); box-shadow: 0 0 25px rgba(0,255,255,0.4); }
.price { font-size: 1.3rem; font-weight: 700; color: var(--c-primary); }
.price span { font-size: .8rem; }

/* Ultra float button / badge */
.ultra-float-btn {
  position: fixed; bottom: 22px; left: 22px;
  background: linear-gradient(135deg, #0040ff, #00ffff);
  color: #fff; border: none; border-radius: 40px; font-weight: 600;
  padding: .7rem 1.2rem; display: flex; align-items: center; gap: .5rem;
  cursor: pointer; font-size: .95rem; z-index: var(--z-overlay);
  animation: ultraPulse 2s infinite ease-in-out alternate; transition: var(--tr-med);
  box-shadow: 0 0 20px #00bfffaa;
}
.ultra-float-btn:hover { transform: scale(1.08); box-shadow: 0 0 35px #00e0ff; }
@keyframes ultraPulse { from { box-shadow: 0 0 15px #00bfff, 0 0 30px #0040ff; } to { box-shadow: 0 0 30px #00ffff, 0 0 60px #00bfff; } }

.ultra-badge {
  margin-left: 10px; padding: 5px 12px; border-radius: 25px;
  background: linear-gradient(135deg, #00c3ff, #0066ff);
  color: #fff; font-size: .85rem; font-weight: 700; display: inline-flex; gap: 6px; align-items: center;
  box-shadow: 0 0 20px #00e0ff; text-shadow: 0 0 6px #00ffff;
  animation: ultraGlow 2.5s ease-in-out infinite alternate;
}
@keyframes ultraGlow { from { box-shadow: 0 0 10px #00e0ff, 0 0 20px #0066ff; } to { box-shadow: 0 0 25px #00ffff, 0 0 40px #00cfff; } }

/* -------------------- ATTACH PANEL & PREVIEW -------------------- */
.attach-panel {
  position: fixed; bottom: -100%; left: 0; width: 100%;
  background: rgba(0, 10, 25, 0.95);
  border-top: 1px solid rgba(0,255,255,0.2);
  box-shadow: 0 -4px 25px rgba(0,255,255,0.2);
  backdrop-filter: blur(12px);
  -webkit-backdrop-filter: blur(12px);
  transition: bottom var(--tr-med);
  z-index: var(--z-overlay);
  padding: 1rem 1.5rem;
}
.attach-panel.show { bottom: 0; box-shadow: 0 -8px 36px rgba(0,191,255,.20); }

.attach-content { max-width: 420px; margin: 0 auto; text-align: center; }
.attach-grid { display: flex; justify-content: center; gap: 1rem; }

.attach-card {
  width: 90px; height: 90px; border-radius: var(--r-md);
  background: rgba(255,255,255,0.06);
  border: 1px solid rgba(0,255,255,0.15);
  box-shadow: 0 0 10px rgba(0,255,255,0.1);
  display: flex; align-items: center; justify-content: center; flex-direction: column; gap: 6px;
  color: #fff; cursor: pointer; transition: transform var(--tr-fast), box-shadow var(--tr-fast);
}
.attach-card:hover { transform: translateY(-4px) scale(1.05); box-shadow: 0 0 20px #00e0ff, 0 0 30px #0066ff; }
.attach-card:active{ transform: translateY(0) scale(.98); }
.attach-card i { font-size: 1.7rem; }
.attach-card span { font-size: .85rem; font-weight: 500; }

.file-preview {
  display: flex; flex-wrap: wrap; gap: 10px;
  padding: .8rem; background: rgba(255,255,255,0.03);
  border-top: 1px solid var(--border-color);
}
.file-item {
  position: relative; border-radius: 10px; overflow: hidden;
  box-shadow: 0 0 12px rgba(0, 255, 255, 0.15);
  width: 80px; height: 80px; display: flex; align-items: center; justify-content: center;
  background: rgba(0, 20, 40, 0.8);
}
.file-item img { width: 100%; height: 100%; object-fit: cover; }
.file-item span { font-size: .75rem; color: var(--c-primary); text-align: center; padding: 2px 4px; word-break: break-word; }
.file-remove {
  position: absolute; top: 3px; right: 4px;
  background: rgba(255, 0, 0, 0.85); color: #fff;
  border: none; border-radius: 50%; width: 18px; height: 18px; font-size: 12px; cursor: pointer; line-height: 1;
}

/* -------------------- FOOTER -------------------- */
.chat-footer {
  position: relative; padding: 12px 0;
  background: rgba(0, 0, 0, 0.5);
  border-top: 1px solid rgba(255,255,255,0.08);
  backdrop-filter: blur(6px);
  -webkit-backdrop-filter: blur(6px);
  overflow: hidden;
}
.footer-text { color: #ddd; font-size: .85rem; letter-spacing: .5px; position: relative; }
.footer-text:hover { color: #fff; }
.neon-cyan { color: #00ffff; font-weight: 600; text-shadow: 0 0 8px rgba(0,255,255,0.6); }
.neon-gold { color: var(--c-accent); font-weight: 600; text-shadow: 0 0 8px rgba(255,215,0,0.6); }
.footer-glow {
  position: absolute; bottom: 0; left: -50%;
  width: 200%; height: 2px;
  background: linear-gradient(90deg, transparent, #00ffff, var(--c-accent), transparent);
  animation: glowSlide 4s linear infinite; opacity: .8;
}
@keyframes glowSlide { 0%{left:-50%} 50%{left:0%} 100%{left:50%} }

/* -------------------- DROPDOWNS (Model) -------------------- */
.dropdown .btn-outline-info {
  border: 1px solid var(--c-primary-2);
  color: var(--c-primary-2);
  transition: var(--tr-med);
}
.dropdown .btn-outline-info:hover {
  background: linear-gradient(90deg, var(--c-primary-3), var(--c-primary-2));
  color: white; box-shadow: 0 0 10px var(--c-primary-2);
}
.dropdown-menu {
  background: rgba(0, 20, 50, 0.95);
  border: 1px solid rgba(0, 200, 255, 0.3);
  box-shadow: 0 0 25px rgba(0, 200, 255, 0.2);
  z-index: var(--z-dropdown);
}
.dropdown-item { color: #e0faff; transition: var(--tr-fast); display:flex; align-items:center; gap:8px; }
.dropdown-item:hover {
  background: linear-gradient(90deg, #0040ff, #00c2ff);
  color: #fff; box-shadow: 0 0 10px var(--c-primary-2); transform: translateX(4px);
}

/* -------------------- LOADER -------------------- */
#loader {
  position: fixed; inset: 0; z-index: var(--z-overlay);
  background: radial-gradient(circle at top left, #000010, #001b36, #000);
  display: flex; align-items: center; justify-content: center; flex-direction: column; color: white;
  transition: opacity 1s ease, visibility 1s ease;
}
.loader-content { text-align:center; animation: fadeIn 1.5s ease forwards; }
.neon-circle {
  width: 100px; height: 100px; border-radius: 50%;
  border: 3px solid var(--c-primary-2);
  box-shadow: 0 0 20px var(--c-primary-2), 0 0 40px var(--c-primary-3);
  animation: spin 2s linear infinite, pulse 1.8s ease-in-out infinite alternate;
  margin-bottom: 2rem;
}
.loader-text { font-weight: 700; font-size: 1.3rem; letter-spacing: 1px; text-shadow: 0 0 10px var(--c-primary-2); }
.loader-text span { color: #00ffff; text-shadow: 0 0 15px #00ffff, 0 0 40px var(--c-primary-2); }

#loader.hidden { opacity: 0; visibility: hidden; pointer-events: none; }

body.light-mode #loader { background: radial-gradient(circle at top left, #eaf7ff, #f8fcff, #ffffff); }
@keyframes spin { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }
@keyframes pulse { from { box-shadow: 0 0 15px #00bfff, 0 0 40px #007bff; } to { box-shadow: 0 0 40px #00ffff, 0 0 80px #00bfff; } }
@keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

/* -------------------- RESPONSIVE -------------------- */
@media (max-width: 992px) {
  .msg-content { max-width: 86%; }
}
@media (max-width: 768px) {
  .sidebar { display: none !important; }
  .chat-container { flex-direction: column; }
  .ultra-float-btn { display: none !important; }
  .chat-input input { font-size: .9rem; }
}
@media (max-width: 576px) {
  .footer-text { font-size: .78rem; }
  .scroll-indicator { right: 12px; bottom: 86px; }
}
/* ==== mmdrza.AI â€” Mobile-safe layout patch (lite) ==== */
:root{
  --footer-h: 56px;           /* Ø§Ø±ØªÙØ§Ø¹ ÙÙˆØªØ± Ø¯Ø± Ø¯Ø³Ú©ØªØ§Ù¾ */
}

/* 1) Flex children Ø¨Ø§ÛŒØ¯ min-height:0 Ø¯Ø§Ø´ØªÙ‡ Ø¨Ø§Ø´Ù† Ú©Ù‡ Ø§Ø³Ú©Ø±ÙˆÙ„ Ø¯Ø±Ø³Øª Ú©Ø§Ø± Ú©Ù†Ù‡ */
.chat-container{ min-height: 0; }
.chat-main{ display:flex; flex-direction:column; min-height:0; }
.chat-messages{ flex:1; min-height:0; overflow:auto; }

/* 2) ÙÙˆØªØ± Ú†Ø³Ø¨Ø§Ù† (sticky) + Ø±Ø²Ø±Ùˆ ÙØ¶Ø§ Ø¨Ø±Ø§ÛŒ Ø¬Ù„ÙˆÚ¯ÛŒØ±ÛŒ Ø§Ø² Ù‡Ù…â€ŒÙ¾ÙˆØ´Ø§Ù†ÛŒ */
.chat-footer{
  position: sticky;
  bottom: calc(env(safe-area-inset-bottom, 0px));
  z-index: 1040; /* Ø¨Ø§Ù„Ø§ØªØ± Ø§Ø² Ù…Ø­ØªÙˆØ§ØŒ Ù¾Ø§ÛŒÛŒÙ†â€ŒØªØ± Ø§Ø² Ù…ÙˆØ¯Ø§Ù„â€ŒÙ‡Ø§ */
  height: var(--footer-h);
  display:flex; align-items:center; justify-content:center;
  padding-bottom: calc(env(safe-area-inset-bottom, 0px)); /* Ø¢ÛŒÙÙˆÙ†â€ŒÙ‡Ø§ */
}

/* Ø¨Ù‡ Ù…Ø­ØªÙˆØ§ Ùˆ ÙˆØ±ÙˆØ¯ÛŒ ÙØ¶Ø§ Ø¨Ø¯Ù‡ ØªØ§ Ø²ÛŒØ± ÙÙˆØªØ± Ù‚Ø§ÛŒÙ… Ù†Ø´Ù‡ */
.chat-main{
  padding-bottom: calc(var(--footer-h) + 8px + env(safe-area-inset-bottom, 0px));
}

/* 3) Ø§Ø³Ú©Ø±ÙˆÙ„â€ŒÙ¾ÛŒÙ„ Ùˆ Ø§ÙØªÙÚ†â€ŒÙ¾Ù†Ù„ Ø¨Ø§Ù„Ø§ØªØ± Ø§Ø² ÙÙˆØªØ± Ø¨Ø§Ø´Ù† (Ø±ÙˆÛŒ Ù…ÙˆØ¨Ø§ÛŒÙ„ Ù…Ù‡Ù…Ù‡) */
.scroll-indicator{ z-index: 1050; }
.attach-panel{ z-index: 1060; }          /* Ø¨Ø§Ù„Ø§ØªØ± Ø§Ø² ÙÙˆØªØ± */
.offcanvas, .offcanvas-backdrop{ z-index: 1050; }

/* 4) Ù…Ø¯Ù„â€ŒØ¨Ø§Ø±/Ø¯Ø±Ø§Ù¾â€ŒØ¯Ø§Ù† Ø±ÙˆÛŒ Ù‡Ù…Ù‡ Ù„Ø§ÛŒÙ‡â€ŒÙ‡Ø§ ÙˆØ§Ø¶Ø­ Ø¨Ù…ÙˆÙ†Ù† */
#modelBar{ position:relative; z-index:1060; }
#modelBar .dropdown-menu{ z-index:1080; }

/* 5) Ø±ÛŒØ³Ù¾Ø§Ù†Ø³ÛŒÙˆ Ù…ÙˆØ¨Ø§ÛŒÙ„: ÙÙˆØªØ± Ú©Ù…ÛŒ Ø¨Ø§Ù„Ø§ØªØ± + Ø±Ø²Ø±Ùˆ Ø¨ÛŒØ´ØªØ± Ø¨Ø±Ø§ÛŒ ÙˆØ±ÙˆØ¯ÛŒ */
@media (max-width: 768px){
  :root{ --footer-h: 64px; }  /* ÙÙˆØªØ± Ú©Ù…ÛŒ Ø¨Ù„Ù†Ø¯ØªØ± */
  .chat-main{
    padding-bottom: calc(var(--footer-h) + 12px + env(safe-area-inset-bottom, 0px));
  }
  .chat-footer{
    padding-top: 6px;
    padding-bottom: calc(6px + env(safe-area-inset-bottom, 0px));
  }
}

/* 6) Ù‡Ù…â€ŒØªØ±Ø§Ø²ÛŒ Ø¹Ù†Ø§ØµØ± Ù¾Ø§ÛŒØ§Ù†ÛŒ Ø¨Ø®Ø´ Ú†Øª Ú©Ù‡ Ú¯Ø§Ù‡ÛŒ Ù…ÛŒâ€ŒØ§ÙØªØ§Ø¯Ù† Ø²ÛŒØ± Ù‡Ù… (Ù…ÙˆØ¨Ø§ÛŒÙ„) */
.quick-prompts{ flex-wrap:wrap; }
.file-preview{ position:relative; z-index: 1; }

/* 7) Ø¬Ù„ÙˆÚ¯ÛŒØ±ÛŒ Ø§Ø² Ø¨Ø±ÛŒØ¯Ù† Ù…Ù†ÙˆÛŒ Ù…Ø¯Ù„ ÙˆÙ‚ØªÛŒ Ù†Ø²Ø¯ÛŒÚ© Ù„Ø¨Ù‡â€ŒØ³Øª */
#modelBar, #modelBar .dropdown{ overflow: visible; }

/* 8) Ø±ÙˆØ§Ù†â€ŒØªØ± Ú©Ø±Ø¯Ù† Ø±Ù†Ø¯Ø± Ù„ÛŒØ³Øª Ù¾ÛŒØ§Ù…â€ŒÙ‡Ø§ Ø¨Ø¯ÙˆÙ† ØªØºÛŒÛŒØ± Ø¸Ø§Ù‡Ø± */
.chat-messages{
  content-visibility: auto;
  contain: layout style paint;
}
@media (max-width: 576px) {
  .ultra-float-btn { box-shadow: 0 0 14px #00bfff88; }
  .msg-content { box-shadow: 0 4px 14px rgba(0,0,0,.28); }
  .scroll-indicator { box-shadow: 0 0 12px rgba(0,191,255,.22); }
}
.chat-messages {
  content-visibility: auto;
  contain: layout style paint;
}
/* === Perf Mode (toggle Ø±ÙˆÛŒ body) === */
.perf-mode {
  --blur: 0px;
  --blur-strong: 6px;
  --shadow-soft: 0 2px 8px rgba(0,0,0,.2);
}

.perf-mode .msg-content { box-shadow: var(--shadow-soft); }
.perf-mode .ultra-content { box-shadow: 0 8px 24px rgba(0,0,0,.45); }
.perf-mode .navbar,
.perf-mode .offcanvas.text-bg-dark,
.perf-mode .attach-panel {
  backdrop-filter: none !important;
  -webkit-backdrop-filter: none !important;
}
/* ==== Fix: Offcanvas should sit ABOVE everything from the main app ==== */
.offcanvas-backdrop { z-index: 1995 !important; }
.offcanvas { z-index: 2000 !important; }

/* Model bar must be BELOW the offcanvas */
#modelBar { position: sticky; top: 0; z-index: 1010 !important; }

/* Hide/disable interactive UI while drawer is open */
body.drawer-open #modelBar,
body.drawer-open .scroll-indicator,
body.drawer-open .ultra-float-btn {
  opacity: 0;
  pointer-events: none;
}

/* Ø§Ø·Ù…ÛŒÙ†Ø§Ù† Ø§Ø² Ø¨Ø³ØªÙ‡ Ø¨ÙˆØ¯Ù† dropdown Ø²ÛŒØ± offcanvas */
#modelBar .dropdown-menu { z-index: 1080; }

/* Ø¯Ø± ØµÙˆØ±Øª Ù†ÛŒØ§Ø²: Ø¬Ù„ÙˆÚ¯ÛŒØ±ÛŒ Ø§Ø² cut Ø´Ø¯Ù† Ù…Ù†Ùˆ */
#modelBar, #modelBar .dropdown { overflow: visible; }
@supports (padding: max(0px)) {
  .offcanvas.offcanvas-start {
    padding-bottom: max(16px, env(safe-area-inset-bottom));
  }
}
/* ==== Fix: keep header/modelBar/footer fixed; scroll only inside messages ==== */

/* ØµÙØ­Ù‡ Ø±Ùˆ Ù‚ÙÙ„ Ú©Ù† Ú©Ù‡ Ú©Ù„ body Ø§Ø³Ú©Ø±ÙˆÙ„ Ù†Ø®ÙˆØ±Ù‡ */
html, body { height: 100%; }
body {
  height: 100dvh;           /* Ø¨Ù‡ØªØ± Ø§Ø² 100vh Ø±ÙˆÛŒ Ù…ÙˆØ¨Ø§ÛŒÙ„ */
  min-height: 100svh;       /* safe viewport height Ø¨Ø±Ø§ÛŒ Ù…Ø±ÙˆØ±Ú¯Ø±Ù‡Ø§ÛŒ Ø¬Ø¯ÛŒØ¯ */
  overflow: hidden;         /* Ù…Ù‡Ù…: Ø§Ø³Ú©Ø±ÙˆÙ„ ÙÙ‚Ø· Ø¯Ø§Ø®Ù„ chat-messages */
}

/* Ú©Ø§Ù†ØªÛŒÙ†Ø± Ú†Øª Ø¨Ø§ÛŒØ¯ Ø§Ø¬Ø§Ø²Ù‡ Ø§Ø³Ú©Ø±ÙˆÙ„ Ø¯Ø§Ø®Ù„ÛŒ Ø¨Ø¯Ù‡ */
.chat-container { flex: 1 1 auto; min-height: 0; }
.chat-main       { display:flex; flex-direction:column; min-height:0; }
.chat-messages   {
  flex: 1 1 auto;
  min-height: 0;
  overflow-y: auto !important;   /* Ø§Ø³Ú©Ø±ÙˆÙ„ Ø§ÛŒÙ†Ø¬Ø§ */
  overscroll-behavior: contain;  /* Ø¬Ù„ÙˆÚ¯ÛŒØ±ÛŒ Ø§Ø² Ú©Ø´ÛŒØ¯Ù‡â€ŒØ´Ø¯Ù† ØµÙØ­Ù‡ */
  -webkit-overflow-scrolling: touch; /* Ø±ÙˆØ§Ù† ØªÙˆ iOS */
  scroll-behavior: auto;         /* Ø­ÛŒÙ† Ø§Ø³ØªØ±ÛŒÙ…ØŒ Ù„Ú¯ Ú©Ù…ØªØ± */
}

/* ÙÙˆØªØ± Ùˆ modelBar Ø«Ø§Ø¨Øª Ù…ÛŒâ€ŒÙ…ÙˆÙ†Ù†ØŒ Ù…Ø­ØªÙˆØ§ÛŒ ÙˆØ³Ø· Ø§Ø³Ú©Ø±ÙˆÙ„ Ù…ÛŒâ€ŒØ®ÙˆØ±Ù‡ */
#modelBar { position: sticky; top: 0; z-index: 1010; }

/* ÙÙˆØªØ± sticky ÙˆÙ„ÛŒ Ø±ÙˆÛŒ Ù„Ø§ÛŒÙ‡â€ŒÛŒ Ø«Ø§Ø¨ØªØ› Ø¬Ù„ÙˆÛŒ Ø¬Ø§Ø¨Ø¬Ø§ÛŒÛŒ ØµÙØ­Ù‡ Ø±Ùˆ Ù†Ù…ÛŒâ€ŒÚ¯ÛŒØ±Ù‡ */
:root{ --footer-h: 56px; }
.chat-footer {
  position: sticky;
  bottom: 0;
  z-index: 1040;
  height: var(--footer-h);
  display:flex; align-items:center; justify-content:center;
  padding-bottom: calc(env(safe-area-inset-bottom, 0px));
}
/* Ø¬Ø§ÛŒ ÙÙˆØªØ± Ùˆ input Ø±Ùˆ Ø¨Ø±Ø§ÛŒ Ù…Ø­ØªÙˆØ§ÛŒ ÙˆØ³Ø· Ø±Ø²Ø±Ùˆ Ú©Ù† */
.chat-main {
  padding-bottom: calc(var(--footer-h) + 12px + env(safe-area-inset-bottom, 0px));
}

/* iOS rubber-band Ø±Ø§ Ø®Ù†Ø«ÛŒ Ú©Ù† */
html, body { overscroll-behavior-y: none; }

/* ÙˆÙ‚ØªÛŒ Offcanvas Ø¨Ø§Ø²Ù‡ØŒ Ù„Ø§ÛŒÙ‡â€ŒÙ‡Ø§ Ø¯Ø±Ø³Øª Ø±ÙˆÛŒ Ù‡Ù… Ø¨Ù†Ø´ÛŒÙ†Ù† */
.offcanvas-backdrop { z-index: 1995 !important; }
.offcanvas          { z-index: 2000 !important; }
